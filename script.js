// Dummy Data untuk setiap Asta Cita
const dataAsta = {
  1: {
    cards: [
      "📊 Indeks Demokrasi: 75",
      "⚖️ Indeks HAM: 80",
      "📰 Kebebasan Pers: 70",
    ],
    line: {
      title: ["Demokrasi", "HAM", "Pers"],
      labels: ["2020", "2021", "2022"],
      data: [
        [70, 72, 75],
        [75, 78, 80],
        [65, 68, 70],
      ],
    },
    bar: {
      title: ["Demokrasi", "HAM", "Pers"],
      labels: ["2020", "2021", "2022"],
      data: [
        [70, 72, 75],
        [75, 78, 80],
        [65, 68, 70],
      ],
    },
    table: [
      ["Tahun", "Demokrasi", "HAM", "Pers"],
      ["2020", 70, 75, 65],
      ["2021", 72, 78, 68],
      ["2022", 75, 80, 70],
    ],
    analyze:
      "Indikator ideologi, demokrasi, HAM, dan kebebasan pers menunjukkan tren positif sepanjang 2020–2022. Nilai demokrasi naik dari 70 menjadi 75, HAM dari 75 ke 80, serta pers dari 65 ke 70. Kenaikan konsisten ini menggambarkan adanya penguatan institusi demokrasi dan perlindungan hak asasi, meskipun capaian pers masih relatif lebih rendah dibandingkan aspek lain. Hal ini menandakan perlunya perhatian khusus untuk memperluas kebebasan pers agar selaras dengan peningkatan demokrasi dan HAM. Dengan memperkuat regulasi yang adil, meningkatkan transparansi, serta mendorong partisipasi masyarakat sipil, maka ketiga aspek ini dapat tumbuh lebih seimbang. Ke depan, sinergi antara penguatan demokrasi, penghormatan HAM, dan perlindungan kebebasan pers akan menjadi fondasi penting bagi konsolidasi ideologi kebangsaan serta stabilitas politik jangka panjang.",
  },
  2: {
    cards: ["🌾 Pangan: 90%", "⚡ Energi: 75%", "💧 Air: 85%"],
    line: {
      title: ["Pangan", "Energi", "Air"],
      labels: ["2020", "2021", "2022"],
      data: [
        [70, 80, 90],
        [65, 70, 75],
        [80, 82, 85],
      ],
    },
    bar: {
      title: ["Pangan", "Energi", "Air"],
      labels: ["2020", "2021", "2022"],
      data: [
        [70, 80, 90],
        [65, 70, 75],
        [80, 82, 85],
      ],
    },
    table: [
      ["Tahun", "Pangan", "Energi", "Air"],
      ["2020", 70, 65, 80],
      ["2021", 80, 70, 82],
      ["2022", 90, 75, 85],
    ],
    analyze:
      "Bidang pertahanan dan swasembada mencatat kemajuan signifikan dalam tiga tahun terakhir. Ketahanan pangan meningkat dari 70 menjadi 90, energi dari 65 ke 75, dan air dari 80 ke 85. Peningkatan ini menunjukkan bahwa program swasembada, khususnya pangan, berjalan efektif dengan lonjakan tajam. Sektor energi juga membaik meski lebih lambat, menandakan perlunya diversifikasi sumber daya energi dan percepatan transisi menuju energi terbarukan. Ketersediaan air relatif stabil dengan kenaikan kecil, menegaskan perlunya pengelolaan sumber daya air yang berkelanjutan. Secara keseluruhan, tren ini memperlihatkan arah yang positif menuju kemandirian strategis, namun menuntut perhatian lebih besar pada sektor energi agar tidak menjadi titik lemah dalam ketahanan nasional. Dengan memperkuat inovasi teknologi dan kebijakan terintegrasi, Indonesia bisa memperkokoh fondasi swasembada di masa depan.",
  },
  3: {
    cards: [
      "👷 Lapangan Kerja: 60%",
      "🏭 Industri Kreatif: 40%",
      "🚧 Infrastruktur: 1200 km",
    ],
    line: {
      title: ["Kerja", "Kreatif", "Infrastruktur"],
      labels: ["2020", "2021", "2022"],
      data: [
        [55, 58, 60],
        [35, 38, 40],
        [1000, 1100, 1200],
      ],
    },
    bar: {
      title: ["Kerja", "Kreatif", "Infrastruktur"],
      labels: ["2020", "2021", "2022"],
      data: [
        [55, 58, 60],
        [35, 38, 40],
        [1000, 1100, 1200],
      ],
    },
    table: [
      ["Tahun", "Kerja %", "Kreatif %", "Tol (km)"],
      ["2020", 55, 35, 1000],
      ["2021", 58, 38, 1100],
      ["2022", 60, 40, 1200],
    ],
    analyze:
      "Peningkatan lapangan kerja dan pembangunan infrastruktur menunjukkan tren progresif. Tingkat partisipasi kerja naik dari 55% pada 2020 menjadi 60% pada 2022, sementara kontribusi sektor kreatif naik dari 35% ke 40%. Keduanya menggambarkan bahwa peluang kerja semakin terbuka, dengan sektor kreatif berkembang sebagai motor tambahan pertumbuhan ekonomi. Dari sisi infrastruktur, panjang jalan tol bertambah dari 1000 km menjadi 1200 km, mencerminkan percepatan konektivitas antarwilayah. Sinergi antara ketersediaan lapangan kerja dan infrastruktur transportasi yang memadai diharapkan mampu mendorong distribusi ekonomi yang lebih merata. Meski begitu, laju kenaikan masih relatif moderat sehingga perlu percepatan kebijakan yang lebih inklusif. Mendorong investasi pada sektor padat karya, ekonomi kreatif, dan pembangunan infrastruktur desa–kota akan memperkuat daya saing tenaga kerja sekaligus memperluas kesempatan kerja yang produktif.",
  },
  4: {
    cards: [
      "📚 Melek Huruf: 95%",
      "🎓 Partisipasi Sekolah: 88%",
      "🔬 Riset: 1500 publikasi",
    ],
    line: {
      title: ["Melek Huruf", "Sekolah", "Riset"],
      labels: ["2020", "2021", "2022"],
      data: [
        [85, 90, 95],
        [80, 85, 88],
        [1000, 1200, 1500],
      ],
    },
    bar: {
      title: ["Melek Huruf", "Sekolah", "Riset"],
      labels: ["2020", "2021", "2022"],
      data: [
        [85, 90, 95],
        [80, 85, 88],
        [1000, 1200, 1500],
      ],
    },
    table: [
      ["Tahun", "Melek Huruf", "Sekolah %", "Riset"],
      ["2020", 85, 80, 1000],
      ["2021", 90, 85, 1200],
      ["2022", 95, 88, 1500],
    ],
    analyze:
      "Indikator SDM, pendidikan, dan kesehatan melalui literasi, sekolah, serta riset memperlihatkan peningkatan pesat. Melek huruf naik dari 85% menjadi 95% dalam tiga tahun, menunjukkan hampir seluruh masyarakat telah memiliki keterampilan dasar. Partisipasi sekolah juga meningkat dari 80% ke 88%, meskipun laju kenaikannya melambat. Sementara itu, jumlah riset melonjak dari 1000 menjadi 1500, menandakan adanya korelasi positif antara kualitas pendidikan dan produktivitas penelitian. Capaian ini menegaskan pentingnya fokus ke arah literasi digital, keterampilan abad 21, serta penelitian berbasis inovasi. Ke depan, strategi yang relevan adalah memperkuat mutu pendidikan, memperluas akses setara, dan menghubungkan dunia pendidikan dengan riset serta industri. Dengan begitu, pertumbuhan kualitas SDM dapat berkelanjutan dan menjadi motor utama pembangunan nasional.",
  },
  5: {
    cards: [
      "🏭 Hilirisasi: 65%",
      "📦 Industri Dalam Negeri: 70%",
      "🚢 Ekspor Olahan: 55%",
    ],
    line: {
      title: ["Hilirisasi", "Industri", "Ekspor Olahan"],
      labels: ["2020", "2021", "2022"],
      data: [
        [50, 60, 65],
        [60, 65, 70],
        [40, 50, 55],
      ],
    },
    bar: {
      title: ["Hilirisasi", "Industri", "Ekspor Olahan"],
      labels: ["2020", "2021", "2022"],
      data: [
        [50, 60, 65],
        [60, 65, 70],
        [40, 50, 55],
      ],
    },
    table: [
      ["Tahun", "Hilirisasi %", "Industri %", "Ekspor Olahan %"],
      ["2020", 50, 60, 40],
      ["2021", 60, 65, 50],
      ["2022", 65, 70, 55],
    ],
    analyze:
      "Sektor hilirisasi dan industrialisasi menunjukkan perbaikan berkelanjutan. Tingkat hilirisasi meningkat dari 50% pada 2020 menjadi 65% pada 2022, industri dari 60% ke 70%, dan ekspor produk olahan dari 40% ke 55%. Peningkatan ini menandakan adanya pergeseran dari ekspor bahan mentah menuju produk bernilai tambah. Hal ini tidak hanya memperluas kesempatan kerja, tetapi juga memperkuat daya saing Indonesia di pasar global. Namun, laju kenaikan masih relatif moderat sehingga perlu akselerasi dalam penguatan industri berbasis teknologi dan pengembangan rantai pasok dalam negeri. Dukungan terhadap UMKM dan investasi asing yang diarahkan ke hilirisasi akan memperkuat ekosistem industri nasional. Dengan menjaga konsistensi kebijakan, sektor hilirisasi dapat menjadi pilar utama industrialisasi yang berkelanjutan.",
  },
  6: {
    cards: [
      "🏡 Desa Maju: 65%",
      "🚜 Desa Tertinggal: 15%",
      "💰 Kemiskinan: 8%",
    ],
    line: {
      title: ["Desa Maju", "Tertinggal", "Kemiskinan"],
      labels: ["2020", "2021", "2022"],
      data: [
        [60, 62, 65],
        [20, 18, 15],
        [10, 9, 8],
      ],
    },
    bar: {
      title: ["Desa Maju", "Tertinggal", "Kemiskinan"],
      labels: ["2020", "2021", "2022"],
      data: [
        [60, 62, 65],
        [20, 18, 15],
        [10, 9, 8],
      ],
    },
    table: [
      ["Tahun", "Desa Maju %", "Tertinggal %", "Kemiskinan %"],
      ["2020", 60, 20, 10],
      ["2021", 62, 18, 9],
      ["2022", 65, 15, 8],
    ],
    analyze:
      "Indikator pembangunan desa memperlihatkan perbaikan kondisi sosial-ekonomi masyarakat. Persentase desa maju meningkat dari 60% pada 2020 menjadi 65% pada 2022, sementara desa tertinggal menurun dari 20% ke 15% dan tingkat kemiskinan turun dari 10% menjadi 8%. Tren ini menunjukkan bahwa program pembangunan desa efektif dalam mengurangi kesenjangan. Meskipun begitu, penurunan angka desa tertinggal relatif lambat, menandakan masih adanya hambatan struktural. Penguatan infrastruktur dasar, peningkatan akses pendidikan dan kesehatan, serta pemberdayaan ekonomi lokal perlu menjadi fokus utama. Strategi pembangunan berbasis potensi desa, ditambah dengan digitalisasi layanan desa, dapat mempercepat transformasi. Dengan konsistensi program, desa bisa menjadi pusat pertumbuhan baru yang berkontribusi pada pemerataan pembangunan nasional.",
  },
  7: {
    cards: [
      "⚖️ Indeks Korupsi: 70",
      "🏛️ Reformasi Hukum: 65",
      "📋 Transparansi: 75",
    ],
    line: {
      title: ["Korupsi", "Hukum", "Transparansi"],
      labels: ["2020", "2021", "2022"],
      data: [
        [60, 65, 70],
        [55, 60, 65],
        [65, 70, 75],
      ],
    },
    bar: {
      title: ["Korupsi", "Hukum", "Transparansi"],
      labels: ["2020", "2021", "2022"],
      data: [
        [60, 65, 70],
        [55, 60, 65],
        [65, 70, 75],
      ],
    },
    table: [
      ["Tahun", "Korupsi", "Hukum", "Transparansi"],
      ["2020", 60, 55, 65],
      ["2021", 65, 60, 70],
      ["2022", 70, 65, 75],
    ],
    analyze:
      "Reformasi politik dan hukum menunjukkan perkembangan positif dari 2020 hingga 2022. Indeks korupsi meningkat dari 60 ke 70, hukum dari 55 ke 65, serta transparansi dari 65 ke 75. Kenaikan ini menggambarkan adanya perbaikan tata kelola pemerintahan, penguatan lembaga hukum, serta peningkatan kepercayaan publik. Meski begitu, laju perbaikan masih moderat sehingga diperlukan reformasi yang lebih struktural, seperti memperkuat independensi aparat penegak hukum dan memperluas akses keadilan. Transparansi yang semakin baik harus dibarengi dengan mekanisme akuntabilitas yang lebih kuat untuk memastikan integritas politik. Jika reformasi politik dan hukum berjalan konsisten, maka fondasi demokrasi akan semakin kokoh dan mendorong stabilitas pembangunan jangka panjang.",
  },
  8: {
    cards: [
      "🌳 Luas Hutan: 50%",
      "🌍 Emisi Karbon: -15%",
      "🤝 Indeks Toleransi: 80",
    ],
    line: {
      title: ["Hutan", "Emisi", "Toleransi"],
      labels: ["2020", "2021", "2022"],
      data: [
        [45, 48, 50],
        [-20, -18, -15],
        [70, 75, 80],
      ],
    },
    bar: {
      title: ["Hutan", "Emisi", "Toleransi"],
      labels: ["2020", "2021", "2022"],
      data: [
        [45, 48, 50],
        [-20, -18, -15],
        [70, 75, 80],
      ],
    },
    table: [
      ["Tahun", "Hutan %", "Emisi %", "Toleransi"],
      ["2020", 45, -20, 70],
      ["2021", 48, -18, 75],
      ["2022", 50, -15, 80],
    ],
    analyze:
      "Indikator lingkungan dan toleransi menunjukkan perkembangan yang menjanjikan. Persentase hutan meningkat dari 45% menjadi 50% antara 2020–2022, sementara emisi berkurang dari -20% ke -15%, menunjukkan adanya upaya mitigasi perubahan iklim. Tingkat toleransi sosial juga naik dari 70 ke 80, memperlihatkan kohesi sosial yang semakin baik. Kombinasi ini menegaskan bahwa pembangunan berkelanjutan tidak hanya soal menjaga lingkungan, tetapi juga memperkuat nilai keberagaman. Meski tren positif, capaian peningkatan hutan dan penurunan emisi masih terbatas sehingga diperlukan percepatan kebijakan hijau, investasi energi terbarukan, dan perlindungan kawasan kritis. Dengan mengintegrasikan agenda lingkungan dan toleransi, Indonesia dapat memperkuat posisinya sebagai negara yang berkelanjutan sekaligus inklusif dalam menghadapi tantangan global.",
  },
};

// Init Chart
const lineCtx = document.getElementById("lineChart").getContext("2d");
const barCtx = document.getElementById("barChart").getContext("2d");

let currentAsta = 1; // simpan Asta Cita yang sedang aktif
let lineChart = new Chart(lineCtx, {
  type: "line",
  data: {
    labels: [],
    datasets: [
      { label: "", data: [], borderColor: "#4CAF50", fill: false },
      { label: "", data: [], borderColor: "#FF9800", fill: false },
      { label: "", data: [], borderColor: "#2196F3", fill: false },
    ],
  },
});
let barChart = new Chart(barCtx, {
  type: "bar",
  data: {
    labels: [],
    datasets: [
      {
        label: "",
        data: [],
        backgroundColor: ["#4CAF50", "#4CAF50", "#4CAF50"],
      },
      {
        label: "",
        data: [],
        backgroundColor: ["#FF9800", "#FF9800", "#FF9800"],
      },
      {
        label: "",
        data: [],
        backgroundColor: ["#2196F3", "#2196F3", "#2196F3"],
      },
    ],
  },
});

// Render function
function selectAsta(num) {
  currentAsta = num; // update Asta Cita aktif

  // Hapus class active dari semua menu
  document.querySelectorAll(".sidebar ul li").forEach((li) => {
    li.classList.remove("active");
  });

  // Tambahkan class active ke menu yang dipilih
  document
    .querySelector(`.sidebar ul li:nth-child(${num})`)
    .classList.add("active");

  const data = dataAsta[num];
  console.log(data);

  // Cards
  document.getElementById("cards").innerHTML = data.cards
    .map((c) => `<div class="card">${c}</div>`)
    .join("");

  // Line chart
  lineChart.data.labels = data.line.labels;
  lineChart.data.datasets = data.line.title.map((t, i) => ({
    label: t,
    data: data.line.data[i],
    borderColor: ["#4CAF50", "#FF9800", "#2196F3"][i], // bisa auto kasih warna
    fill: false,
  }));
  lineChart.update();

  // Bar chart
  barChart.data.labels = data.bar.labels;
  barChart.data.datasets = data.bar.title.map((t, i) => ({
    label: t,
    data: data.bar.data[i],
    backgroundColor: ["#4CAF50", "#FF9800", "#2196F3", "#F44336"][i % 4],
  }));
  barChart.update();

  // Table
  let html =
    "<thead><tr>" +
    data.table[0].map((h) => `<th>${h}</th>`).join("") +
    "</tr></thead><tbody>";
  for (let i = 1; i < data.table.length; i++) {
    html +=
      "<tr>" + data.table[i].map((v) => `<td>${v}</td>`).join("") + "</tr>";
  }
  html += "</tbody>";
  document.getElementById("dataTable").innerHTML = html;
}

// Modal dengan analisis dinamis
function openModal(type) {
  const data = dataAsta[currentAsta];
  let analysis = "";

  if (type === "Line Chart") {
    analysis = data.analyze;
    //   const values = data.line.data;
    //   if (values[values.length - 1] > values[0]) {
    //     analysis =
    //       "📈 Terlihat tren meningkat dari " +
    //       values[0] +
    //       " ke " +
    //       values[values.length - 1] +
    //       ".";
    //   } else {
    //     analysis =
    //       "📉 Terlihat tren menurun dari " +
    //       values[0] +
    //       " ke " +
    //       values[values.length - 1] +
    //       ".";
    //   }
  }

  if (type === "Bar Chart") {
    const values = data.bar.data;
    const labels = data.bar.labels;
    const maxVal = Math.max(...values);
    const minVal = Math.min(...values);
    const maxLabel = labels[values.indexOf(maxVal)];
    const minLabel = labels[values.indexOf(minVal)];
    analysis = `📊 Nilai tertinggi ada pada **${maxLabel} (${maxVal})**, sedangkan terendah di **${minLabel} (${minVal})**.`;
  }

  if (type === "Tabel") {
    const rows = data.table.slice(1); // exclude header
    let sum = 0,
      count = 0;
    rows.forEach((r) => {
      r.slice(1).forEach((v) => {
        sum += Number(v);
        count++;
      });
    });
    const avg = (sum / count).toFixed(2);
    analysis = `📋 Rata-rata keseluruhan indikator adalah **${avg}** dengan variasi antar tahun.`;
  }

  document.getElementById("modal").style.display = "flex";
  document.getElementById("analysisText").innerText = analysis;
}

function closeModal() {
  document.getElementById("modal").style.display = "none";
}

// Load awal (Asta Cita 1)
selectAsta(1);
